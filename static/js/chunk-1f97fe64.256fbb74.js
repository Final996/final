(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f97fe64"],{"0ccb":function(e,t,n){var r=n("50c4"),i=n("1148"),a=n("1d80"),o=Math.ceil,s=function(e){return function(t,n,s){var c,l,u=String(a(t)),f=u.length,p=void 0===s?" ":String(s),d=r(n);return d<=f||""==p?u:(c=d-f,l=i.call(p,o(c/p.length)),l.length>c&&(l=l.slice(0,c)),e?u+l:l+u)}};e.exports={start:s(!1),end:s(!0)}},"0feb":function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n("b775");function i(){return Object(r["a"])({url:"/sys/permission"})}function a(e){return Object(r["a"])({url:"/sys/permission",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/sys/permission/".concat(e.id),method:"put",data:e})}function s(e){return Object(r["a"])({url:"/sys/permission/".concat(e),method:"delete"})}function c(e){return Object(r["a"])({url:"/sys/permission/".concat(e)})}},1148:function(e,t,n){"use strict";var r=n("a691"),i=n("1d80");e.exports="".repeat||function(e){var t=String(i(this)),n="",a=r(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var a=n.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"231a":function(e,t,n){"use strict";n("b2dd")},"2c3e":function(e,t,n){var r=n("83ab"),i=n("9f7f").UNSUPPORTED_Y,a=n("9bf2").f,o=n("69f3").get,s=RegExp.prototype;r&&i&&a(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!o(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},"4d63":function(e,t,n){var r=n("83ab"),i=n("da84"),a=n("94ca"),o=n("7156"),s=n("9bf2").f,c=n("241c").f,l=n("44e7"),u=n("ad6d"),f=n("9f7f"),p=n("6eeb"),d=n("d039"),m=n("69f3").set,b=n("2626"),g=n("b622"),h=g("match"),v=i.RegExp,w=v.prototype,x=/a/g,y=/a/g,E=new v(x)!==x,R=f.UNSUPPORTED_Y,O=r&&a("RegExp",!E||R||d((function(){return y[h]=!1,v(x)!=x||v(y)==y||"/a/i"!=v(x,"i")})));if(O){var k=function(e,t){var n,r=this instanceof k,i=l(e),a=void 0===t;if(!r&&i&&e.constructor===k&&a)return e;E?i&&!a&&(e=e.source):e instanceof k&&(a&&(t=u.call(e)),e=e.source),R&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var s=o(E?new v(e,t):v(e,t),r?this:w,k);return R&&n&&m(s,{sticky:n}),s},j=function(e){e in k||s(k,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},_=c(v),P=0;while(_.length>P)j(_[P++]);w.constructor=k,k.prototype=w,p(i,"RegExp",k)}b("RegExp")},"4d90":function(e,t,n){"use strict";var r=n("23e7"),i=n("0ccb").start,a=n("9a0c");r({target:"String",proto:!0,forced:a},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5319:function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),a=n("7b0b"),o=n("50c4"),s=n("a691"),c=n("1d80"),l=n("8aa5"),u=n("14c3"),f=Math.max,p=Math.min,d=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,w=h?"$":"$0";return[function(n,r){var i=c(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!h&&v||"string"===typeof r&&-1===r.indexOf(w)){var a=n(t,e,this,r);if(a.done)return a.value}var c=i(e),d=String(this),m="function"===typeof r;m||(r=String(r));var b=c.global;if(b){var y=c.unicode;c.lastIndex=0}var E=[];while(1){var R=u(c,d);if(null===R)break;if(E.push(R),!b)break;var O=String(R[0]);""===O&&(c.lastIndex=l(d,o(c.lastIndex),y))}for(var k="",j=0,_=0;_<E.length;_++){R=E[_];for(var P=String(R[0]),S=f(p(s(R.index),d.length),0),$=[],D=1;D<R.length;D++)$.push(g(R[D]));var z=R.groups;if(m){var F=[P].concat($,S,d);void 0!==z&&F.push(z);var I=String(r.apply(void 0,F))}else I=x(P,d,S,$,z,r);S>=j&&(k+=d.slice(j,S)+I,j=S+P.length)}return k+d.slice(j)}];function x(e,n,r,i,o,s){var c=r+e.length,l=i.length,u=b;return void 0!==o&&(o=a(o),u=m),t.call(s,u,(function(t,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>l){var f=d(u/10);return 0===f?t:f<=l?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):t}s=i[u-1]}return void 0===s?"":s}))}}))},"6c35":function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a"),n("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"app-container"},[t("div",{staticClass:"role-operate"},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.showDialog=!0}}},[e._v("添加角色")])],1),t("el-table",{attrs:{data:e.list}},[t("el-table-column",{attrs:{prop:"name",align:"center",width:"200",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[r.isEdit?t("el-input",{attrs:{size:"mini"},model:{value:r.editRow.name,callback:function(t){e.$set(r.editRow,"name",t)},expression:"row.editRow.name"}}):t("span",[e._v(e._s(r.name))])]}}])}),t("el-table-column",{attrs:{prop:"state",align:"center",width:"200",label:"启用"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[r.isEdit?t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:r.editRow.state,callback:function(t){e.$set(r.editRow,"state",t)},expression:"row.editRow.state"}}):t("span",[e._v(" "+e._s(1===r.state?"已启用":0===r.state?"未启用":"无")+" ")])]}}])}),t("el-table-column",{attrs:{prop:"description",align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[r.isEdit?t("el-input",{attrs:{size:"mini",type:"textarea"},model:{value:r.editRow.description,callback:function(t){e.$set(r.editRow,"description",t)},expression:"row.editRow.description"}}):t("span",[e._v(e._s(r.description))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[r.isEdit?[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.btnEditOK(r)}}},[e._v("确定")]),t("el-button",{attrs:{size:"mini"},on:{click:function(e){r.isEdit=!1}}},[e._v("取消")])]:[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.btnPermission(r.id)}}},[e._v("分配权限")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.btnEditRow(r)}}},[e._v("编辑")]),t("el-popconfirm",{attrs:{title:"这是一段内容确定删除吗？"},on:{onConfirm:function(t){return e.confirmDel(r.id)}}},[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[e._v("删除")])],1)]]}}])})],1),t("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",align:"middle",justify:"end"}},[t("el-pagination",{attrs:{"page-size":e.pageParams.pagesize,"current-page":e.pageParams.page,total:e.pageParams.total,layout:"prev, pager, next"},on:{"current-change":e.changePage}})],1)],1),t("el-dialog",{attrs:{width:"500px",title:"新增角色",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t},close:e.btnCancel}},[t("el-form",{ref:"roleForm",attrs:{model:e.roleForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{prop:"name",label:"角色名称"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini"},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1),t("el-form-item",{attrs:{label:"启用",prop:"state"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,size:"mini"},model:{value:e.roleForm.state,callback:function(t){e.$set(e.roleForm,"state",t)},expression:"roleForm.state"}})],1),t("el-form-item",{attrs:{prop:"description",label:"角色描述"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:3,size:"mini"},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}})],1),t("el-form-item",[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.btnOK}},[e._v("确定")]),t("el-button",{attrs:{size:"mini"},on:{click:e.btnCancel}},[e._v("取消")])],1)],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.showPermissionDialog,title:"分配权限"},on:{"update:visible":function(t){e.showPermissionDialog=t}}},[t("el-tree",{ref:"permTree",attrs:{"check-strictly":"","node-key":"id",data:e.permissionData,props:{label:"name"},"show-checkbox":"","default-expand-all":"","default-checked-keys":e.permIds}}),t("el-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.btnPermissionOK}},[e._v("确定")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showPermissionDialog=!1}}},[e._v("取消")])],1)],1)],1)],1)},i=[],a=n("5530"),o=n("c7eb"),s=n("1da1"),c=(n("d3b7"),n("159b"),n("b775"));function l(e){return Object(c["a"])({url:"/sys/role",params:e})}function u(e){return Object(c["a"])({url:"/sys/role",method:"post",data:e})}function f(e){return Object(c["a"])({url:"/sys/role/".concat(e.id),method:"put",data:e})}function p(e){return Object(c["a"])({url:"/sys/role/".concat(e),method:"delete"})}function d(e){return Object(c["a"])({url:"/sys/role/".concat(e)})}function m(e){return Object(c["a"])({url:"/sys/role/assignPrem",method:"put",data:e})}var b=n("0feb"),g=n("ed08"),h={name:"Role",data:function(){return{list:[],showDialog:!1,pageParams:{page:1,pagesize:5,total:0},roleForm:{name:"",description:"",state:0},rules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],description:[{required:!0,message:"角色描述不能为空",trigger:"blur"}]},showPermissionDialog:!1,permissionData:[],currentRoleId:null,permIds:[]}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n,r,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l(e.pageParams);case 2:n=t.sent,r=n.rows,i=n.total,e.list=r,e.pageParams.total=i,e.list.forEach((function(t){e.$set(t,"isEdit",!1),e.$set(t,"editRow",{name:t.name,state:t.state,description:t.description})}));case 8:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.pageParams.page=e,this.getRoleList()},btnOK:function(){var e=this;this.$refs.roleForm.validate(function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(n){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.next=3,u(e.roleForm);case 3:e.$message.success("新增角色成功"),e.getRoleList(),e.btnCancel();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},btnCancel:function(){this.$refs.roleForm.resetFields(),this.showDialog=!1},btnEditRow:function(e){e.isEdit=!0,e.editRow.name=e.name,e.editRow.state=e.state,e.editRow.description=e.description},btnEditOK:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.editRow.name||!e.editRow.description){n.next=7;break}return n.next=3,f(Object(a["a"])(Object(a["a"])({},e.editRow),{},{id:e.id}));case 3:t.$message.success("更新角色成功"),Object.assign(e,Object(a["a"])(Object(a["a"])({},e.editRow),{},{isEdit:!1})),n.next=8;break;case 7:t.$message.warning("角色和描述不能为空");case 8:case"end":return n.stop()}}),n)})))()},confirmDel:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,p(e);case 2:t.$message.success("删除角色成功"),1===t.list.length&&t.pageParams.page--,t.getRoleList();case 5:case"end":return n.stop()}}),n)})))()},btnPermission:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){var r,i;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.currentRoleId=e,n.next=3,d(e);case 3:return r=n.sent,i=r.permIds,t.permIds=i,n.t0=g["a"],n.next=9,Object(b["d"])();case 9:n.t1=n.sent,t.permissionData=(0,n.t0)(n.t1,0),t.showPermissionDialog=!0;case 12:case"end":return n.stop()}}),n)})))()},btnPermissionOK:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m({id:e.currentRoleId,permIds:e.$refs.permTree.getCheckedKeys()});case 2:e.$message.success("角色分配权限成功"),e.showPermissionDialog=!1;case 4:case"end":return t.stop()}}),t)})))()}}},v=h,w=(n("231a"),n("2877")),x=Object(w["a"])(v,r,i,!1,null,"40f3dc73",null);t["default"]=x.exports},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"9a0c":function(e,t,n){var r=n("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},b2dd:function(e,t,n){},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),a=n("b622"),o=n("9263"),s=n("9112"),c=a("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=a("replace"),p=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),d=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var m=a(e),b=!i((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),g=b&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!b||!g||"replace"===e&&(!l||!u||p)||"split"===e&&!d){var h=/./[m],v=n(m,""[e],(function(e,t,n,r,i){return t.exec===o?b&&!i?{done:!0,value:h.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),w=v[0],x=v[1];r(String.prototype,e,w),r(RegExp.prototype,m,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}f&&s(RegExp.prototype[m],"sham",!0)}},ed08:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("53ca"),n("d3b7"),n("4d63"),n("ac1f"),n("2c3e"),n("00b4"),n("25f0"),n("4d90"),n("5319"),n("159b");function r(e,t){var n=[];return e.forEach((function(i){if(i.pid===t){n.push(i);var a=r(e,i.id);a.length&&(i.children=a)}})),n}}}]);